{"ast":null,"code":"import { _saveQuestion, _saveQuestionAnswer } from \"../utils/_DATA\";\nimport { updateUserAnswers, updateUserQuestions } from \"./users\";\nexport const RECEIVE_QUESTIONS = \"RECEIVE_QUESTIONS\";\nexport const ADD_QUESTION = \"ADD_QUESTION\";\nexport const ADD_ANSWER = \"ADD_ANSWER\";\nexport function receiveQuestions(questions) {\n  return {\n    type: RECEIVE_QUESTIONS,\n    questions\n  };\n}\n\nfunction addQuestion(question) {\n  return {\n    type: ADD_QUESTION,\n    question\n  };\n}\n\nexport function handleAddQuestion(optionOneText, optionTwoText) {\n  return (dispatch, getState) => {\n    const {\n      authedUser\n    } = getState();\n    return _saveQuestion({\n      optionOneText,\n      optionTwoText,\n      author: authedUser\n    }).then(question => {\n      dispatch(addQuestion(question));\n      dispatch(updateUserQuestions(question.id, authedUser));\n    });\n  };\n}\n\nfunction addAnswer(answer) {\n  return {\n    type: ADD_ANSWER,\n    answer\n  };\n}\n\nexport function handleAddAnswer(answerInfo) {\n  return async dispatch => {\n    try {\n      const result = await fetch(\"http://127.0.0.1:8000/api/addVote\", {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          question_id: answerInfo.qid,\n          user_id: answerInfo.authedUser,\n          option: answerInfo.answer\n        })\n      });\n      console.log(result.json());\n\n      if (!result.ok) {\n        throw new Error(`Error: Status ${result.status}`);\n      }\n\n      dispatch(addAnswer(answerInfo));\n      dispatch(updateUserAnswers(answerInfo));\n    } catch (error) {\n      alert(\"Error occured\");\n    }\n  };\n}","map":{"version":3,"names":["_saveQuestion","_saveQuestionAnswer","updateUserAnswers","updateUserQuestions","RECEIVE_QUESTIONS","ADD_QUESTION","ADD_ANSWER","receiveQuestions","questions","type","addQuestion","question","handleAddQuestion","optionOneText","optionTwoText","dispatch","getState","authedUser","author","then","id","addAnswer","answer","handleAddAnswer","answerInfo","result","fetch","method","headers","Accept","body","JSON","stringify","question_id","qid","user_id","option","console","log","json","ok","Error","status","error","alert"],"sources":["/home/talha/Documents/Laravel With React/Employees poll project with laravel/employee-polls-web-app/src/actions/questions.js"],"sourcesContent":["import { _saveQuestion, _saveQuestionAnswer } from \"../utils/_DATA\";\nimport { updateUserAnswers, updateUserQuestions } from \"./users\";\n\nexport const RECEIVE_QUESTIONS = \"RECEIVE_QUESTIONS\";\nexport const ADD_QUESTION = \"ADD_QUESTION\";\nexport const ADD_ANSWER = \"ADD_ANSWER\";\n\nexport function receiveQuestions(questions) {\n\treturn {\n\t\ttype: RECEIVE_QUESTIONS,\n\t\tquestions,\n\t};\n}\n\nfunction addQuestion(question) {\n\treturn {\n\t\ttype: ADD_QUESTION,\n\t\tquestion,\n\t};\n}\n\nexport function handleAddQuestion(optionOneText, optionTwoText) {\n\treturn (dispatch, getState) => {\n\t\tconst { authedUser } = getState();\n\n\t\treturn _saveQuestion({\n\t\t\toptionOneText,\n\t\t\toptionTwoText,\n\t\t\tauthor: authedUser,\n\t\t}).then((question) => {\n\t\t\tdispatch(addQuestion(question));\n\t\t\tdispatch(updateUserQuestions(question.id, authedUser));\n\t\t});\n\t};\n}\n\nfunction addAnswer(answer) {\n\treturn {\n\t\ttype: ADD_ANSWER,\n\t\tanswer,\n\t};\n}\n\nexport function handleAddAnswer(answerInfo) {\n\treturn async (dispatch) => {\n\t\ttry {\n\t\t\tconst result = await fetch(\"http://127.0.0.1:8000/api/addVote\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: \"application/json\",\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tquestion_id: answerInfo.qid,\n\t\t\t\t\tuser_id: answerInfo.authedUser,\n\t\t\t\t\toption: answerInfo.answer,\n\t\t\t\t}),\n\t\t\t});\n\t\t\tconsole.log(result.json());\n\t\t\tif (!result.ok) {\n\t\t\t\tthrow new Error(`Error: Status ${result.status}`);\n\t\t\t}\n\n\t\t\tdispatch(addAnswer(answerInfo));\n\t\t\tdispatch(updateUserAnswers(answerInfo));\n\t\t} catch (error) {\n\t\t\talert(\"Error occured\");\n\t\t}\n\t};\n}\n"],"mappings":"AAAA,SAASA,aAAT,EAAwBC,mBAAxB,QAAmD,gBAAnD;AACA,SAASC,iBAAT,EAA4BC,mBAA5B,QAAuD,SAAvD;AAEA,OAAO,MAAMC,iBAAiB,GAAG,mBAA1B;AACP,OAAO,MAAMC,YAAY,GAAG,cAArB;AACP,OAAO,MAAMC,UAAU,GAAG,YAAnB;AAEP,OAAO,SAASC,gBAAT,CAA0BC,SAA1B,EAAqC;EAC3C,OAAO;IACNC,IAAI,EAAEL,iBADA;IAENI;EAFM,CAAP;AAIA;;AAED,SAASE,WAAT,CAAqBC,QAArB,EAA+B;EAC9B,OAAO;IACNF,IAAI,EAAEJ,YADA;IAENM;EAFM,CAAP;AAIA;;AAED,OAAO,SAASC,iBAAT,CAA2BC,aAA3B,EAA0CC,aAA1C,EAAyD;EAC/D,OAAO,CAACC,QAAD,EAAWC,QAAX,KAAwB;IAC9B,MAAM;MAAEC;IAAF,IAAiBD,QAAQ,EAA/B;IAEA,OAAOhB,aAAa,CAAC;MACpBa,aADoB;MAEpBC,aAFoB;MAGpBI,MAAM,EAAED;IAHY,CAAD,CAAb,CAIJE,IAJI,CAIER,QAAD,IAAc;MACrBI,QAAQ,CAACL,WAAW,CAACC,QAAD,CAAZ,CAAR;MACAI,QAAQ,CAACZ,mBAAmB,CAACQ,QAAQ,CAACS,EAAV,EAAcH,UAAd,CAApB,CAAR;IACA,CAPM,CAAP;EAQA,CAXD;AAYA;;AAED,SAASI,SAAT,CAAmBC,MAAnB,EAA2B;EAC1B,OAAO;IACNb,IAAI,EAAEH,UADA;IAENgB;EAFM,CAAP;AAIA;;AAED,OAAO,SAASC,eAAT,CAAyBC,UAAzB,EAAqC;EAC3C,OAAO,MAAOT,QAAP,IAAoB;IAC1B,IAAI;MACH,MAAMU,MAAM,GAAG,MAAMC,KAAK,CAAC,mCAAD,EAAsC;QAC/DC,MAAM,EAAE,MADuD;QAE/DC,OAAO,EAAE;UACRC,MAAM,EAAE,kBADA;UAER,gBAAgB;QAFR,CAFsD;QAM/DC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;UACpBC,WAAW,EAAET,UAAU,CAACU,GADJ;UAEpBC,OAAO,EAAEX,UAAU,CAACP,UAFA;UAGpBmB,MAAM,EAAEZ,UAAU,CAACF;QAHC,CAAf;MANyD,CAAtC,CAA1B;MAYAe,OAAO,CAACC,GAAR,CAAYb,MAAM,CAACc,IAAP,EAAZ;;MACA,IAAI,CAACd,MAAM,CAACe,EAAZ,EAAgB;QACf,MAAM,IAAIC,KAAJ,CAAW,iBAAgBhB,MAAM,CAACiB,MAAO,EAAzC,CAAN;MACA;;MAED3B,QAAQ,CAACM,SAAS,CAACG,UAAD,CAAV,CAAR;MACAT,QAAQ,CAACb,iBAAiB,CAACsB,UAAD,CAAlB,CAAR;IACA,CApBD,CAoBE,OAAOmB,KAAP,EAAc;MACfC,KAAK,CAAC,eAAD,CAAL;IACA;EACD,CAxBD;AAyBA"},"metadata":{},"sourceType":"module"}